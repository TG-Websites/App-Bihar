<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Volunteer</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="icon" href="https://aamaadmiparty.org/wp-content/uploads/2024/05/cropped-AAP-logos-2024-1-180x180.jpg"
    type="image/webp" />
  <link rel="shortcut icon"
    href="https://aamaadmiparty.org/wp-content/uploads/2024/05/cropped-AAP-logos-2024-1-180x180.jpg"
    type="image/webp" />
  <link rel="apple-touch-icon"
    href="https://aamaadmiparty.org/wp-content/uploads/2024/05/cropped-AAP-logos-2024-1-180x180.jpg" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <script src="./custom_datepicker.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#021A32",
            "primary-light": "#082F56", // submenu background
            hover: "#FFFF00",
            "aap-navy": "#021A32",
          }
        }
      }
    }
  </script>
</head>

<body class="bg-gray-50 min-h-screen overflow-x-hidden">
  <!-- nav bar  -->
  <!-- =================== NAVBAR =================== -->
  <nav class="bg-primary text-white shadow-lg fixed top-0 left-0 right-0 z-50">
    <div class="max-w-7xl mx-auto px-6 sm:px-5 lg:px-7">
      <div class="flex justify-between items-center h-20">

        <!-- Logo -->
        <a href="index.html" class="flex items-center">
          <img src="https://aamaadmiparty.org/wp-content/uploads/2024/02/unnamed-33.webp" alt="Logo"
            class="w-28 h-10 mr-6" />
        </a>

        <!-- Desktop Menu -->
        <div class="hidden md:block">
          <div class="ml-10 flex items-center space-x-2 lg:space-x-4">

            <!-- HOME -->
            <a href="index.html" class="px-3 py-2 text-sm font-medium hover:text-hover transition-colors duration-200">
              होम
            </a>

            <!-- जुड़े (Join) -->
            <a href="./jude.html" class="px-3 py-2 text-sm font-medium hover:text-hover transition-colors duration-200"
              role="menuitem">
              जुड़े
            </a>

            <!-- लड़े -->
            <a href="./candidate_application.html"
              class="px-3 py-2 text-sm font-medium hover:text-hover transition-colors duration-200">
              लड़े
            </a>

            <!-- बदले -->
            <a href="./campaign.html"
              class="px-3 py-2 text-sm font-medium hover:text-hover transition-colors duration-200">
              बदले
            </a>
          </div>
        </div>

        <!-- Right controls -->
        <div class="flex items-center gap-2">
          <!-- Hamburger → Sidebar -->
          <button id="sidebar-open-btn" type="button" class="text-white hover:text-hover focus:outline-none"
            aria-label="Open sidebar menu" onclick="toggleSidebar(true)">
            <svg class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
          </button>
        </div>

      </div>
    </div>
  </nav>

  <!-- Overlay -->
  <div id="sidebar-overlay" class="fixed inset-0 bg-black/50 z-[60] hidden" onclick="toggleSidebar(false)"></div>

  <!-- =================== SIDEBAR (Drawer) =================== -->
  <aside id="sidebar" class="fixed top-0 right-0 h-full w-72 max-w-[85vw] bg-primary-light text-white shadow-2xl z-[61]
              translate-x-full transition-transform duration-300" aria-hidden="true" aria-label="Sidebar menu">

    <!-- Header -->
    <div class="flex items-center justify-between px-4 h-16 border-b border-white/20">
      <h3 class="text-lg font-semibold">Menu</h3>
      <button type="button" class="p-2 rounded hover:bg-hover hover:text-primary transition" aria-label="Close sidebar"
        onclick="toggleSidebar(false)">
        <svg class="w-6 h-6" viewBox="0 0 24 24" stroke="currentColor" fill="none" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <!-- Content -->
    <div class="p-4 space-y-2">

      <!-- हमारे नेता (collapsible) -->
      <div>
        <button type="button" id="btn-leader" aria-controls="leader-dropdown-mobile" class="flex w-full items-center justify-between px-3 py-2 text-sm font-medium rounded
                     hover:bg-hover hover:text-primary transition"
          onclick="toggleCollapse('leader-dropdown-mobile','icon-leader')" aria-expanded="false">
          <span>हमारे नेता</span>
          <svg id="icon-leader" class="w-4 h-4 transition-transform" viewBox="0 0 20 20" fill="currentColor"
            aria-hidden="true">
            <path fill-rule="evenodd"
              d="M5.23 7.21a.75.75 0 011.06.02L10 11.17l3.71-3.94a.75.75 0 111.08 1.04l-4.24 4.5a.75.75 0 01-1.08 0l-4.24-4.5a.75.75 0 01.02-1.06z"
              clip-rule="evenodd" />
          </svg>
        </button>
        <div id="leader-dropdown-mobile" class="hidden pl-6 space-y-1">
          <a href="main_wing.html"
            class="block px-3 py-2 text-sm rounded hover:bg-hover hover:text-primary transition">MAIN
            WING</a>
          <a href="youth.html"
            class="block px-3 py-2 text-sm rounded hover:bg-hover hover:text-primary transition">YOUTH
            WING</a>
        </div>
      </div>

      <!-- Login -->
      <a href="https://admin.aapbihar.org" target="_blank"
        class="block px-3 py-2 text-sm font-medium rounded hover:bg-hover hover:text-primary transition">
        लॉग इन करें
      </a>

      <!-- Divider -->
      <hr class="my-2 border-white/20">

      <!-- Mobile-only main links -->
      <a href="index.html"
        class="block sm:hidden px-3 py-2 text-sm font-medium rounded hover:bg-hover hover:text-primary transition">
        होम
      </a>

      <!-- जुड़े (collapsible) -->
      <a href="./jude.html" class="px-3 py-2 text-sm font-medium hover:text-hover transition-colors duration-200"
        role="menuitem">
        जुड़े
      </a>

      <!-- Mobile Only Links -->
      <a href="./candidate_application.html"
        class="block sm:hidden px-3 py-2 text-sm font-medium rounded hover:bg-hover hover:text-primary transition">लड़े</a>
      <a href="./campaign.html"
        class="block sm:hidden px-3 py-2 text-sm font-medium rounded hover:bg-hover hover:text-primary transition">बदले</a>
    </div>
  </aside>

  <!-- =================== SCRIPTS =================== -->
  <script>
    // ——— Drawer (Sidebar) ———
    function toggleSidebar(open) {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('sidebar-overlay');
      const isOpening = typeof open === 'boolean' ? open : sidebar.classList.contains('translate-x-full');

      if (isOpening) {
        sidebar.classList.remove('translate-x-full');
        sidebar.setAttribute('aria-hidden', 'false');
        overlay.classList.remove('hidden');
      } else {
        sidebar.classList.add('translate-x-full');
        sidebar.setAttribute('aria-hidden', 'true');
        overlay.classList.add('hidden');
        // Optionally collapse any open sections when closing:
        collapseIfOpen('leader-dropdown-mobile', 'icon-leader');
        collapseIfOpen('join-dropdown-sidebar', 'icon-join');
      }
    }

    // ——— Generic collapse/expand helper ———
    function toggleCollapse(listId, iconId) {
      const list = document.getElementById(listId);
      const icon = document.getElementById(iconId);
      const triggerBtn = list?.previousElementSibling;

      if (!list) return;

      const isHidden = list.classList.contains('hidden');
      list.classList.toggle('hidden');

      if (triggerBtn) triggerBtn.setAttribute('aria-expanded', String(isHidden));
      if (icon) icon.classList.toggle('rotate-180', isHidden);
    }

    function collapseIfOpen(listId, iconId) {
      const list = document.getElementById(listId);
      const icon = document.getElementById(iconId);
      const triggerBtn = list?.previousElementSibling;
      if (list && !list.classList.contains('hidden')) {
        list.classList.add('hidden');
        if (triggerBtn) triggerBtn.setAttribute('aria-expanded', 'false');
        if (icon) icon.classList.remove('rotate-180');
      }
    }

    // Close sidebar with ESC
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') toggleSidebar(false);
    });
  </script>

  <div class="container mx-auto px-4 py-4 sm:py-8 max-w-md sm:max-w-lg lg:max-w-2xl xl:max-w-4xl pt-12  ">

    <div class="text-center mb-8 sm:mb-12">
      <br>
      <br>
      <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-primary tracking-wide mb-4 mt-16">Registration
        for
        Volunteer</h1>
      <p class="text-gray-600 text-sm sm:text-base">Join our mission to serve the community</p>
    </div>

    <!-- Progress Steps -->
    <div class="mb-6 sm:mb-8">
      <div class="flex items-center justify-center mb-4">
        <div class="flex items-center space-x-2 sm:space-x-4">
          <div class="flex items-center">
            <div id="step1"
              class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-yellow-500 flex items-center justify-center text-white font-semibold text-sm sm:text-base">
              1</div>
            <div class="text-xs sm:text-sm text-gray-600 ml-2">Step 1 of 2</div>
          </div>
          <div class="w-8 sm:w-16 h-1 bg-yellow-500"></div>
          <div id="step2"
            class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-gray-300 flex items-center justify-center text-gray-500 font-semibold text-sm sm:text-base">
            2</div>
          <div class="w-8 sm:w-16 h-1 bg-yellow-500"></div>
          <div id="step3"
            class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-gray-300 flex items-center justify-center text-gray-500 font-semibold text-sm sm:text-base">
            3</div>
        </div>
      </div>
    </div>

    <!-- Form Container -->
    <div class="bg-white rounded-2xl shadow-lg p-4 sm:p-6 lg:p-8">
      <!-- ONE form wrapping all steps -->
      <!-- ONE form wrapping all steps -->
      <form id="joinForm" class="space-y-4 sm:space-y-6" enctype="multipart/form-data">
        <!-- Step 1 -->
        <div id="form-step-1">
          <div class="lg:grid lg:grid-cols-2 lg:gap-6 lg:space-y-0 space-y-4">
            <!-- Left Column -->
            <div class="space-y-4 sm:space-y-6">
              <!-- Full Name -->
              <div>
                <label for="fullName" class="block text-aap-navy font-medium mb-2 text-sm sm:text-base">Full
                  Name</label>
                <input type="text" id="fullName" name="fullName" placeholder="Enter your name"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent">
              </div>
              <!-- Password -->
              <div>
                <label for="fullName" class="block text-aap-navy font-medium mb-2 text-sm sm:text-base">Password</label>
                <input type="text" id="password" name="password" placeholder="Enter your password"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent">
              </div>

              <!-- Date of Birth -->
              <div>
                <label for="dateOfBirth" class="block font-medium mb-2 text-sm sm:text-base text-aap-navy">
                  Date of Birth
                </label>

                <div class="relative">
                  <input type="text" id="dateOfBirth" name="dateOfBirth" placeholder="(DD/MM/YYYY)" data-datepicker
                    readonly class="w-full bg-white rounded-lg border border-gray-200 pl-10 pr-3 py-2
             text-sm sm:text-base text-gray-900 placeholder-gray-400
             focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent
             hover:border-primary/50 transition" />
                </div>
              </div>


              <!-- Gender -->
              <div>
                <label for="gender" class="block text-gray-700 font-medium mb-2 text-sm sm:text-base">Gender</label>
                <select id="gender" name="gender"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent appearance-none bg-white">
                  <option value="">Select your gender</option>
                  <option value="Male">Male</option>
                  <option value="Female">Female</option>
                  <option value="Other">Other</option>
                </select>
              </div>

              <!-- Mobile Number -->
              <div>
                <label for="mobileNumber" class="block text-gray-700 font-medium mb-2 text-sm sm:text-base">Mobile
                  Number</label>
                <input type="tel" id="mobileNumber" name="mobileNumber" placeholder="Enter your mobile number"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent">
              </div>
            </div>

            <!-- Right Column -->
            <div class="space-y-4 sm:space-y-6">
              <!-- Profile Picture -->
              <div>
                <label for="profilePictureInput" class="block text-gray-700 font-medium mb-2 text-sm sm:text-base">
                  Profile Picture
                </label>
                <div id="profileUploadArea"
                  class="border-2 border-dashed border-gray-300 rounded-lg p-4 sm:p-8 text-center cursor-pointer hover:border-aap-navy transition-colors">
                  <!-- Camera icon -->
                  <svg class="mx-auto h-10 w-10 sm:h-12 sm:w-12 text-gray-400 mb-2" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"
                    aria-hidden="true">
                    <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h3l2-3h8l2 3h3a2 2 0 0 1 2 2z"></path>
                    <circle cx="12" cy="13" r="4"></circle>
                  </svg>
                  <p class="text-gray-500 text-xs sm:text-sm">Click to upload image</p>
                  <input type="file" accept="image/*" class="hidden" id="profilePictureInput" name="profilePicture">
                </div>
                <img id="imagePreview" src="#" alt="Image Preview"
                  class="hidden w-24 h-24 object-cover rounded-full mt-2 mx-auto">
                <p id="uploadStatus" class="text-sm mt-2"></p>
              </div>
            </div>
          </div>

          <!-- Next Button -->
          <div class="pt-4">
            <button type="button" id="nextStep1Btn"
              class="inline-flex items-center gap-2 w-full sm:w-auto sm:min-w-32 bg-aap-navy text-white py-2 sm:py-3 px-6 rounded-lg font-semibold hover:bg-primary-light transition-colors text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-hover">
              Next
              <!-- Chevron Right -->
              <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M9 18l6-6-6-6" />
              </svg>
            </button>
          </div>
        </div>

        <!-- Step 2 -->
        <div id="form-step-2" class="hidden">
          <div class="lg:grid lg:grid-cols-2 lg:gap-6 lg:space-y-0 space-y-4">
            <!-- Left Column -->
            <div class="space-y-4 sm:space-y-6">
              <!-- Zone Selection -->
              <div>
                <span class="block text-gray-700 font-medium mb-4 text-sm sm:text-base">What Zone do you live in?</span>
                <div class="flex flex-wrap gap-2 sm:gap-4 mb-6">
                  <label class="flex items-center cursor-pointer transform hover:scale-105 transition-transform">
                    <input type="radio" name="zone" value="urban" class="hidden zone-radio">
                    <span
                      class="zone-button inline-flex items-center gap-2 bg-gray-200 text-gray-700 px-4 sm:px-6 py-2 sm:py-3 rounded-full text-sm sm:text-base font-medium border-2 border-transparent hover:border-hover transition-all duration-300">
                      <!-- Building icon -->
                      <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"
                        stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                        <rect x="3" y="3" width="7" height="18"></rect>
                        <rect x="14" y="8" width="7" height="13"></rect>
                        <line x1="7" y1="6" x2="7" y2="6"></line>
                        <line x1="7" y1="10" x2="7" y2="10"></line>
                        <line x1="7" y1="14" x2="7" y2="14"></line>
                      </svg>
                      Urban
                    </span>
                  </label>
                  <label class="flex items-center cursor-pointer transform hover:scale-105 transition-transform">
                    <input type="radio" name="zone" value="rural" class="hidden zone-radio">
                    <span
                      class="zone-button inline-flex items-center gap-2 bg-gray-200 text-gray-700 px-4 sm:px-6 py-2 sm:py-3 rounded-full text-sm sm:text-base font-medium border-2 border-transparent hover:border-hover transition-all duration-300">
                      <!-- Home/leaf icon -->
                      <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8"
                        stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                        <path d="M3 10l9-7 9 7"></path>
                        <path d="M9 21V9h6v12"></path>
                      </svg>
                      Rural
                    </span>
                  </label>
                </div>

                <!-- Zone Description -->
                <div id="zone-description" class="hidden p-4 rounded-lg mb-4 transition-all duration-500">
                  <div id="urban-desc" class="hidden">
                    <div class="flex items-center mb-2">
                      <!-- City icon -->
                      <svg class="h-5 w-5 mr-2 text-aap-navy" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                        <rect x="3" y="3" width="7" height="18"></rect>
                        <rect x="14" y="8" width="7" height="13"></rect>
                      </svg>
                      <span class="font-semibold text-aap-navy">Urban Area Selected</span>
                    </div>
                    <p class="text-sm text-gray-600">You've selected Urban zone. Please fill in your city details below.
                    </p>
                  </div>
                  <div id="rural-desc" class="hidden">
                    <div class="flex items-center mb-2">
                      <!-- House icon -->
                      <svg class="h-5 w-5 mr-2 text-aap-navy" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                        <path d="M3 10l9-7 9 7"></path>
                        <path d="M9 21V9h6v12"></path>
                      </svg>
                      <span class="font-semibold text-aap-navy">Rural Area Selected</span>
                    </div>
                    <p class="text-sm text-gray-600">You've selected Rural zone. Please provide your village and
                      panchayat details below.</p>
                  </div>
                </div>
              </div>

              <!-- District -->
              <div>
                <label for="district-select"
                  class="block text-gray-700 font-medium mb-2 text-sm sm:text-base">District</label>
                <select id="district-select" name="district"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent appearance-none bg-white">
                  <option value="">Select your district</option>
                  <option>Delhi</option>
                  <option>Mumbai</option>
                  <option>Bangalore</option>
                  <option>Pune</option>
                  <option>Jaipur</option>
                </select>
              </div>

              <!-- Block -->
              <div>
                <label for="block-select"
                  class="block text-gray-700 font-medium mb-2 text-sm sm:text-base">Block</label>
                <select id="block-select" name="block"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent appearance-none bg-white">
                  <option value="">Select your block</option>
                </select>
              </div>

              <!-- Panchayat/City Name -->
              <div>
                <label id="panchayat-label" for="panchayat-select"
                  class="block text-gray-700 font-medium mb-2 text-sm sm:text-base">Panchayat</label>
                <select id="panchayat-select" name="panchayatOrCity"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent appearance-none bg-white">
                  <option value="" id="panchayat-option">Select your Panchayat</option>
                </select>
              </div>

              <!-- Village Name -->
              <div id="village-field">
                <label for="village-input" class="block text-gray-700 font-medium mb-2 text-sm sm:text-base">Village
                  Name</label>
                <input type="text" id="village-input" name="village" placeholder="Enter your village name"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent">
              </div>
            </div>

            <!-- Right Column -->
            <div class="space-y-4 sm:space-y-6">
              <!-- Ward Number -->
              <div>
                <label for="wardNumber" class="block text-gray-700 font-medium mb-2 text-sm sm:text-base">Ward
                  Number</label>
                <input type="text" id="wardNumber" name="wardNumber" placeholder="Enter your ward number"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent">
              </div>

              <!-- Booth Number -->
              <div>
                <label for="boothNumber" class="block text-gray-700 font-medium mb-2 text-sm sm:text-base">Booth
                  Number</label>
                <input type="text" id="boothNumber" name="boothNumber" placeholder="Enter your booth number"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent">
              </div>

              <!-- PIN Code -->
              <div>
                <label for="pinCode" class="block text-gray-700 font-medium mb-2 text-sm sm:text-base">PIN Code</label>
                <input type="text" id="pinCode" name="pinCode" placeholder="Enter your pin code"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent">
              </div>

              <!-- Post Office -->
              <div>
                <label for="postOffice" class="block text-gray-700 font-medium mb-2 text-sm sm:text-base">Post
                  Office</label>
                <input type="text" id="postOffice" name="postOffice" placeholder="Enter your post office"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent">
              </div>

              <!-- City Name (Urban) -->
              <div id="city-field" class="hidden">
                <label for="cityName" class="block text-gray-700 font-medium mb-2 text-sm sm:text-base">City
                  Name</label>
                <input type="text" id="cityName" name="cityName" placeholder="Enter your city name"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent">
              </div>

              <!-- Street or Locality (Urban) -->
              <div id="street-field" class="hidden">
                <label for="streetOrLocality" class="block text-gray-700 font-medium mb-2 text-sm sm:text-base">Street
                  or Locality</label>
                <input type="text" id="streetOrLocality" name="streetOrLocality"
                  placeholder="Enter your street or locality"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent">
              </div>
            </div>
          </div>

          <!-- Buttons -->
          <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 pt-4">
            <button type="button" id="backStep1Btn"
              class="inline-flex items-center gap-2 w-full sm:flex-1 bg-gray-200 text-gray-700 py-2 sm:py-3 px-4 rounded-lg font-semibold hover:bg-gray-300 transition-colors text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-hover">
              <!-- Chevron Left -->
              <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M15 18l-6-6 6-6" />
              </svg>
              Back
            </button>
            <button type="button" id="nextStep2Btn"
              class="inline-flex items-center gap-2 w-full sm:flex-1 bg-aap-navy text-white py-2 sm:py-3 px-4 rounded-lg font-semibold hover:bg-primary-light transition-colors text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-hover">
              Continue
              <!-- Chevron Right -->
              <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M9 18l6-6-6-6" />
              </svg>
            </button>
          </div>
        </div>

        <!-- Step 3 -->
        <div id="form-step-3" class="hidden">
          <div class="lg:grid lg:grid-cols-2 lg:gap-6 lg:space-y-0 space-y-4">
            <!-- Left Column -->
            <div class="space-y-4 sm:space-y-6">
              <div>
                <label for="whyYouWantToJoinUs" class="block text-gray-700 font-medium mb-2 text-sm sm:text-base">Why
                  You Want To Join Us</label>
                <textarea id="whyYouWantToJoinUs" name="whyYouWantToJoinUs" placeholder="why you want to join us?"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent"></textarea>
              </div>

              <div>
                <label for="howMuchTimeYouDedicate"
                  class="block text-gray-700 font-medium mb-2 text-sm sm:text-base">How much time you can
                  dedicate?</label>
                <textarea id="howMuchTimeYouDedicate" name="howMuchTimeYouDedicate"
                  placeholder="how much time you dedicate?"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent"></textarea>
              </div>
            </div>

            <!-- Right Column -->
            <div class="space-y-4 sm:space-y-6">
              <div>
                <label for="inWhichFieldYouCanContribute"
                  class="block text-gray-700 font-medium mb-2 text-sm sm:text-base">In which field you can
                  contribute</label>
                <textarea type="text" id="inWhichFieldYouCanContribute" name="inWhichFieldYouCanContribute"
                  placeholder="In which field you can contribute"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent"></textarea>
              </div>
              <div>
                <label for="howCanYouHelpUs" class="block text-gray-700 font-medium mb-2 text-sm sm:text-base">How can
                  you help us</label>
                <textarea type="text" id="howCanYouHelpUs" name="howCanYouHelpUs" placeholder="how can you help us"
                  class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-hover focus:border-transparent"></textarea>
              </div>
            </div>
          </div>

          <!-- Buttons -->
          <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 pt-4">
            <button type="button" id="backStep2Btn"
              class="inline-flex items-center gap-2 w-full sm:flex-1 bg-gray-200 text-gray-700 py-2 sm:py-3 px-4 rounded-lg font-semibold hover:bg-gray-300 transition-colors text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-hover">
              <!-- Chevron Left -->
              <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M15 18l-6-6 6-6" />
              </svg>
              Back
            </button>
            <button type="submit" id="submitFormBtn"
              class="inline-flex items-center gap-2 w-full sm:flex-1 bg-aap-navy text-white py-2 sm:py-3 px-4 rounded-lg font-semibold hover:bg-primary-light transition-colors text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-hover">
              Submit
              <!-- Check icon -->
              <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M20 6L9 17l-5-5" />
              </svg>
            </button>
          </div>
        </div>
      </form>

    </div>
  </div>
  <br>
  <br>
  <footer class="bg-gray-100 text-gray-900">
    <!-- Quote -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 pt-12">
      <blockquote class="text-center lg:text-left">
        <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-[#021A32] leading-snug">
          “First, they ignore you, then they laugh at you, then they fight you and then you win.” – Mahatma Gandhi
        </h2>
      </blockquote>
    </div>

    <!-- Main grid -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 py-10">
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
        <!-- Column: Org -->
        <div class="space-y-3">
          <img src="jharu-removebg-preview.png" alt="AAP Logo" class="w-28 sm:w-32 mx-auto lg:mx-0" />
          <h3 class="font-bold text-[#0b3c82] text-base text-center lg:text-left">AAP BIHAR PARTY</h3>
          <p class="text-sm leading-relaxed text-center lg:text-left">
            1, Pandit Ravi Shankar Shukla Lane, (1 – Canning Lane)<br />New Delhi – 110001
          </p>
          <ul class="text-sm space-y-1 text-center lg:text-left">
            <li><span class="font-semibold">Helpline:</span> 97185 00606</li>
            <li><span class="font-semibold">Timing:</span> 9:00 am – 6:00 pm</li>
            <li><span class="font-semibold">Email:</span> contact@aapbihar.org</li>
          </ul>
        </div>

        <!-- Column: About -->
        <div>
          <h4 class="text-[#0b3c82] font-bold mb-3 text-base text-center lg:text-left">About</h4>
          <ul class="space-y-2 text-sm text-center lg:text-left">
            <li><a href="./candidate_application.html" class="hover:underline hover:text-[#0b3c82]">उम्मीदवार आवेदन</a>
            </li>
            <li><a href="./campaign.html" class="hover:underline hover:text-[#0b3c82]">अभियान</a></li>
            <li><a href="jude.html" class="hover:underline hover:text-[#0b3c82]">हमसे जुड़ें</a></li>
            <li><a href="./addmember.html" class="hover:underline hover:text-[#0b3c82]">स्वयंसेवक बनें</a></li>
          </ul>
        </div>


        <!-- Column: Media -->
        <div>
          <h4 class="text-[#0b3c82] font-bold mb-3 text-base text-center lg:text-left">Media Resources</h4>
          <ul class="space-y-2 text-sm text-center lg:text-left">
            <li><a href="#social" class="hover:underline hover:text-[#0b3c82]">Press Release</a></li>
            <li><a href="#our-main-leader" class="hover:underline hover:text-[#0b3c82]">Meet Our Leader</a></li>
          </ul>
        </div>

        <!-- Column: Social -->
        <div>
          <h4 class="text-[#0b3c82] font-bold mb-3 text-base text-center lg:text-left">Follow us on</h4>
          <div class="flex items-center justify-center lg:justify-start gap-4 text-xl">
            <a href="https://www.facebook.com/AAPBihar/" aria-label="Facebook" class="hover:text-[#0b3c82]"><i
                class="fab fa-facebook-f"></i></a>
            <a href="https://www.instagram.com/aapbihar/?hl=en" aria-label="Instagram" class="hover:text-[#0b3c82]"><i
                class="fab fa-instagram"></i></a>
            <!-- <a href="" aria-label="YouTube" class="hover:text-[#0b3c82]"><i class="fab fa-youtube"></i></a> -->
            <a href="https://x.com/aapbihar?lang=en" aria-label="X" class="hover:text-[#0b3c82]"><i
                class="fab fa-x-twitter"></i></a>
          </div>
        </div>
      </div>
    </div>

    <!-- Bottom bar -->
    <div class="bg-[#021A32]">
      <div
        class="max-w-7xl mx-auto px-4 sm:px-6 py-3 flex flex-col sm:flex-row items-center justify-between gap-3 text-sm text-white">
        <p class="text-center sm:text-left">&copy; 2025 Aap Bihar Party. All rights reserved.</p>
        <nav class="flex flex-wrap justify-center sm:justify-end gap-4">
          <a href="privacy.html" class="hover:underline hover:text-gray-200">Privacy Policy</a>
          <a href="termcondition.html" class="hover:underline hover:text-gray-200">Terms of Service</a>
          <a href="addmember.html" class="hover:underline hover:text-gray-200">Contact Us</a>
        </nav>
      </div>
    </div>
  </footer>

  <script>
    // Sample data for rural areas
    const ruralData = {
      blocks: {
        'Delhi': ['Najafgarh Block', 'Alipur Block', 'Kanjhawala Block'],
        'Mumbai': ['Andheri Block', 'Borivali Block', 'Kurla Block'],
        'Bangalore': ['Anekal Block', 'Devanahalli Block', 'Doddaballapur Block'],
        'Pune': ['Baramati Block', 'Indapur Block', 'Maval Block'],
        'Jaipur': ['Amber Block', 'Bassi Block', 'Chaksu Block']
      },
      panchayats: {
        'Najafgarh Block': ['Najafgarh Panchayat', 'Dichaun Kalan Panchayat', 'Jharoda Kalan Panchayat'],
        'Alipur Block': ['Alipur Panchayat', 'Barwala Panchayat', 'Bakner Panchayat'],
        'Kanjhawala Block': ['Kanjhawala Panchayat', 'Bakkarwala Panchayat', 'Ghoga Panchayat'],
        'Andheri Block': ['Andheri East Panchayat', 'Andheri West Panchayat', 'Jogeshwari Panchayat'],
        'Borivali Block': ['Borivali East Panchayat', 'Borivali West Panchayat', 'Kandivali Panchayat'],
        'Kurla Block': ['Kurla East Panchayat', 'Kurla West Panchayat', 'Chembur Panchayat'],
        'Anekal Block': ['Anekal Panchayat', 'Jigani Panchayat', 'Sarjapur Panchayat'],
        'Devanahalli Block': ['Devanahalli Panchayat', 'Nandi Hills Panchayat', 'Vijayapura Panchayat'],
        'Doddaballapur Block': ['Doddaballapur Panchayat', 'Peresandra Panchayat', 'Sulibele Panchayat'],
        'Baramati Block': ['Baramati Panchayat', 'Morgaon Panchayat', 'Malshiras Panchayat'],
        'Indapur Block': ['Indapur Panchayat', 'Bhigwan Panchayat', 'Nimgaon Panchayat'],
        'Maval Block': ['Maval Panchayat', 'Talegaon Panchayat', 'Vadgaon Panchayat'],
        'Amber Block': ['Amber Panchayat', 'Bassi Panchayat', 'Jamwa Panchayat'],
        'Bassi Block': ['Bassi Panchayat', 'Kalwar Panchayat', 'Toda Panchayat'],
        'Chaksu Block': ['Chaksu Panchayat', 'Morija Panchayat', 'Sanganer Panchayat']
      }
    };

    const urbanData = {
      blocks: {
        'Delhi': ['Central Delhi', 'North Delhi', 'South Delhi', 'East Delhi', 'West Delhi'],
        'Mumbai': ['South Mumbai', 'Western Suburbs', 'Eastern Suburbs', 'Navi Mumbai'],
        'Bangalore': ['Bangalore North', 'Bangalore South', 'Bangalore East', 'Bangalore Central'],
        'Pune': ['Pune City', 'Pimpri-Chinchwad', 'Pune Cantonment'],
        'Jaipur': ['Jaipur North', 'Jaipur South', 'Jaipur East', 'Jaipur West']
      },
      areas: {
        'Central Delhi': ['Connaught Place', 'Karol Bagh', 'Paharganj'],
        'North Delhi': ['Civil Lines', 'Model Town', 'Kamla Nagar'],
        'South Delhi': ['Defence Colony', 'Lajpat Nagar', 'Greater Kailash'],
        'East Delhi': ['Laxmi Nagar', 'Preet Vihar', 'Mayur Vihar'],
        'West Delhi': ['Rajouri Garden', 'Janakpuri', 'Dwarka'],
        'South Mumbai': ['Colaba', 'Fort', 'Nariman Point'],
        'Western Suburbs': ['Bandra', 'Andheri', 'Borivali'],
        'Eastern Suburbs': ['Kurla', 'Chembur', 'Powai'],
        'Navi Mumbai': ['Vashi', 'Nerul', 'Kharghar'],
        'Bangalore North': ['Hebbal', 'Yelahanka', 'Mathikere'],
        'Bangalore South': ['Koramangala', 'BTM Layout', 'Banashankari'],
        'Bangalore East': ['Whitefield', 'Marathahalli', 'Indiranagar'],
        'Bangalore Central': ['MG Road', 'Brigade Road', 'Chickpet'],
        'Pune City': ['Shivajinagar', 'Kothrud', 'Deccan'],
        'Pimpri-Chinchwad': ['Pimpri', 'Chinchwad', 'Akurdi'],
        'Pune Cantonment': ['Camp Area', 'Wanowrie', 'Ghorpadi'],
        'Jaipur North': ['C-Scheme', 'Malviya Nagar', 'Vaishali Nagar'],
        'Jaipur South': ['Mansarovar', 'Jagatpura', 'Sanganer'],
        'Jaipur East': ['Vidhyadhar Nagar', 'Nirman Nagar', 'Kardhani'],
        'Jaipur West': ['Pratap Nagar', 'Chomu', 'Sikar Road']
      }
    };

    // ----- Step nav helpers -----
    function setProgress(step) {
      const s1 = document.getElementById('step1');
      const s2 = document.getElementById('step2');
      const s3 = document.getElementById('step3');
      const on = (el) => el && (el.classList.remove('bg-gray-300', 'text-gray-500'), el.classList.add('bg-yellow-500', 'text-white'));
      const off = (el) => el && (el.classList.add('bg-gray-300', 'text-gray-500'), el.classList.remove('bg-yellow-500', 'text-white'));
      [s1, s2, s3].forEach(off);
      if (step === 1) on(s1);
      if (step === 2) on(s2);
      if (step === 3) on(s3);
    }

    function goToStep1() {
      document.getElementById('form-step-1').classList.remove('hidden');
      document.getElementById('form-step-2').classList.add('hidden');
      document.getElementById('form-step-3').classList.add('hidden');
      setProgress(1);
    }
    function goToStep2() {
      document.getElementById('form-step-1').classList.add('hidden');
      document.getElementById('form-step-2').classList.remove('hidden');
      document.getElementById('form-step-3').classList.add('hidden');
      setProgress(2);
    }
    function goToStep3() {
      document.getElementById('form-step-1').classList.add('hidden');
      document.getElementById('form-step-2').classList.add('hidden');
      document.getElementById('form-step-3').classList.remove('hidden');
      setProgress(3);
    }

    // ----- Zone / dropdown helpers -----
    function updateFormForZone(selectedZone) {
      const panchayatLabel = document.getElementById('panchayat-label');
      const villageField = document.getElementById('village-field');
      const cityField = document.getElementById('city-field');
      const streetField = document.getElementById('street-field');
      const zoneDescription = document.getElementById('zone-description');
      const urbanDesc = document.getElementById('urban-desc');
      const ruralDesc = document.getElementById('rural-desc');

      zoneDescription.classList.remove('hidden');
      zoneDescription.style.backgroundColor = '#FEF3C7';
      zoneDescription.style.borderLeft = '4px solid #EAB308';

      if (selectedZone === 'rural') {
        panchayatLabel.textContent = 'Panchayat';
        villageField.classList.remove('hidden');
        cityField.classList.add('hidden');
        streetField.classList.add('hidden');
        urbanDesc.classList.add('hidden');
        ruralDesc.classList.remove('hidden');
      } else {
        panchayatLabel.textContent = 'Area/Ward';
        villageField.classList.add('hidden');
        cityField.classList.remove('hidden');
        streetField.classList.remove('hidden');
        ruralDesc.classList.add('hidden');
        urbanDesc.classList.remove('hidden');
      }
    }

    function populateBlocks(district, zone) {
      const blockSelect = document.getElementById('block-select');
      blockSelect.innerHTML = '<option value="">Select your block</option>';
      const data = zone === 'rural' ? ruralData : urbanData;
      const blocks = data.blocks[district] || [];
      blocks.forEach(block => {
        const option = document.createElement('option');
        option.value = block;
        option.textContent = block;
        blockSelect.appendChild(option);
      });
      resetPanchayatDropdown();
    }

    function populatePanchayats(block, zone) {
      const panchayatSelect = document.getElementById('panchayat-select');
      panchayatSelect.innerHTML = `<option value="">Select your Panchayat</option>`;
      const data = zone === 'rural' ? ruralData : urbanData;
      const list = (zone === 'rural' ? data.panchayats[block] : data.areas[block]) || [];
      list.forEach(name => {
        const option = document.createElement('option');
        option.value = name;
        option.textContent = name;
        panchayatSelect.appendChild(option);
      });
    }

    function resetPanchayatDropdown() {
      const panchayatSelect = document.getElementById('panchayat-select');
      panchayatSelect.innerHTML = `<option value="">Select your Panchayat</option>`;
    }

    function resetBlockDropdown() {
      const blockSelect = document.getElementById('block-select');
      blockSelect.innerHTML = '<option value="">Select your block</option>';
    }

    document.addEventListener('DOMContentLoaded', function () {
      setProgress(1); // optional progress pills, if present

      // ----- Upload handling -----
      const profileUploadInput = document.getElementById('profilePictureInput');
      const profileUploadArea = document.getElementById('profileUploadArea');
      const imagePreview = document.getElementById('imagePreview');
      const uploadStatus = document.getElementById('uploadStatus');

      let uploadedImageUrl = ''; // Cloudinary URL after upload
      const BASE_URL = "https://test-api.aapbihar.org"; // backend URL

      async function handleProfilePictureChange(e) {
        const file = e.target.files?.[0];
        if (file) {
          // Show local preview
          const reader = new FileReader();
          reader.onload = (ev) => {
            imagePreview.src = ev.target.result;
            imagePreview.classList.remove('hidden');
          };
          reader.readAsDataURL(file);

          uploadStatus.textContent = 'Uploading...';
          uploadStatus.style.color = 'blue';

          try {
            // 1) get signature from backend
            const signatureResponse = await fetch(`${BASE_URL}/api/cloudinary/signature`, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ folder: "volunteer_profiles" }),
            });
            const signatureData = await signatureResponse.json();
            if (!signatureResponse.ok || !signatureData?.success) {
              throw new Error(signatureData?.message || "Failed to get Cloudinary signature");
            }
            const { signature, timestamp, cloudname, api_key } = signatureData.data;

            // 2) upload to Cloudinary
            const fd = new FormData();
            fd.append("file", file);
            fd.append("api_key", api_key);
            fd.append("timestamp", timestamp);
            fd.append("signature", signature);
            fd.append("folder", "volunteer_profiles");

            const cloudinaryRes = await fetch(`https://api.cloudinary.com/v1_1/${cloudname}/image/upload`, {
              method: "POST",
              body: fd,
            });
            const cloudinaryJson = await cloudinaryRes.json();
            if (!cloudinaryRes.ok) throw new Error(cloudinaryJson?.error?.message || "Cloudinary upload failed");

            uploadedImageUrl = cloudinaryJson.secure_url;
            uploadStatus.textContent = 'Upload successful!';
            uploadStatus.style.color = 'green';
          } catch (err) {
            console.error("Image upload error:", err);
            uploadStatus.textContent = `Upload failed: ${err.message}`;
            uploadStatus.style.color = 'red';
            uploadedImageUrl = '';
          }
        } else {
          imagePreview.src = "#";
          imagePreview.classList.add('hidden');
          uploadStatus.textContent = '';
          uploadedImageUrl = '';
        }
      }

      if (profileUploadArea && profileUploadInput) {
        profileUploadArea.addEventListener('click', () => profileUploadInput.click());
        profileUploadInput.addEventListener('change', handleProfilePictureChange);
      }

      // ----- Zone selection -----
      const zoneRadios = document.querySelectorAll('.zone-radio');
      zoneRadios.forEach(radio => {
        radio.addEventListener('change', function () {
          // reset visual state for buttons
          document.querySelectorAll('.zone-button').forEach(btn => {
            btn.className = 'zone-button bg-gray-200 text-gray-700 px-4 sm:px-6 py-2 sm:py-3 rounded-full text-sm sm:text-base font-medium border-2 border-transparent hover:border-yellow-300 transition-all duration-300';
          });

          if (this.checked) {
            const btn = this.nextElementSibling;
            btn.className = 'zone-button bg-yellow-500 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-full text-sm sm:text-base font-medium border-2 border-yellow-600 shadow-lg transform scale-105 transition-all duration-300';

            // Update UI for zone
            updateFormForZone(this.value);

            // Reset dependent dropdowns
            resetBlockDropdown();
            resetPanchayatDropdown();

            // Populate blocks if district already chosen
            const selectedDistrict = document.getElementById('district-select').value;
            if (selectedDistrict) {
              populateBlocks(selectedDistrict, this.value);
            }
          }
        });
      });

      // ----- District / Block handlers -----
      document.getElementById('district-select')?.addEventListener('change', function () {
        const district = this.value;
        const zone = document.querySelector('.zone-radio:checked')?.value;
        resetBlockDropdown();
        resetPanchayatDropdown();
        if (district && zone) populateBlocks(district, zone);
      });

      document.getElementById('block-select')?.addEventListener('change', function () {
        const block = this.value;
        const zone = document.querySelector('.zone-radio:checked')?.value;
        resetPanchayatDropdown();
        if (block && zone) populatePanchayats(block, zone);
      });

      // ----- Step 1: Next -----
      document.getElementById('nextStep1Btn')?.addEventListener('click', function (e) {
        e.preventDefault();
        const fullName = document.getElementById('fullName').value.trim();
        const password = document.getElementById('password').value.trim();
        const dateOfBirth = document.getElementById('dateOfBirth').value.trim();
        const gender = document.getElementById('gender').value.trim();
        const mobileNumber = document.getElementById('mobileNumber').value.trim();

        if (!fullName || !dateOfBirth || !gender || !mobileNumber || !password) {
          alert('Please fill all required fields in Step 1.');
          return;
        }
        goToStep2();
      });

      // ----- Step 2: Next -----
      document.getElementById('nextStep2Btn')?.addEventListener('click', function (e) {
        e.preventDefault();
        const zone = document.querySelector('input[name="zone"]:checked')?.value; // 'urban' | 'rural'
        const district = document.getElementById('district-select').value.trim();
        const block = document.getElementById('block-select').value.trim();
        const panchayatOrArea = document.getElementById('panchayat-select').value.trim();

        if (!zone) { alert('Please select Urban or Rural.'); return; }
        if (!district) { alert('Please select your District.'); return; }
        if (!block) { alert('Please select your Block.'); return; }
        if (!panchayatOrArea) { alert('Please select your Panchayat/Area.'); return; }

        if (zone === 'rural') {
          const village = document.getElementById('village-input').value.trim();
          if (!village) { alert('Please enter your Village name.'); return; }
        } else {
          const city = document.getElementById('cityName').value.trim();
          const street = document.getElementById('streetOrLocality').value.trim();
          if (!city || !street) { alert('Please enter your City and Street/Locality.'); return; }
        }

        goToStep3();
      });

      // ----- Final Submit (whole form) -----
      document.getElementById('joinForm')?.addEventListener('submit', async function (e) {
        e.preventDefault();

        // Validate step 3 fields
        const whyYouWantToJoinUs = document.getElementById('whyYouWantToJoinUs').value.trim();
        const howMuchTimeYouDedicate = document.getElementById('howMuchTimeYouDedicate').value.trim();
        const inWhichFieldYouCanContribute = document.getElementById('inWhichFieldYouCanContribute').value.trim();
        const howCanYouHelpUs = document.getElementById('howCanYouHelpUs').value.trim();
        if (!whyYouWantToJoinUs || !howMuchTimeYouDedicate || !inWhichFieldYouCanContribute || !howCanYouHelpUs) {
          alert('Please fill all required fields in Step 3.');
          return;
        }

        const submitBtn = document.getElementById('submitFormBtn');
        submitBtn.disabled = true;
        submitBtn.textContent = 'Adding...';

        try {
          const zoneVal = document.querySelector('input[name="zone"]:checked')?.value;
          const isUrban = zoneVal === 'urban';

          const payload = {
            fullName: document.getElementById('fullName').value.trim(),
            password: document.getElementById('password').value.trim(),
            dateOfBirth: document.getElementById('dateOfBirth').value.trim(),
            gender: document.getElementById('gender').value.trim(),
            mobileNumber: document.getElementById('mobileNumber').value.trim(),
            profilePicture: uploadedImageUrl || '',
            zone: isUrban ? 'Urban' : 'Rural',
            district: document.getElementById('district-select').value.trim(),
            block: document.getElementById('block-select').value.trim(),
            wardNumber: document.getElementById('wardNumber').value.trim(),
            boothNumber: document.getElementById('boothNumber').value.trim(),
            pinCode: document.getElementById('pinCode').value.trim(),
            postOffice: document.getElementById('postOffice').value.trim(),
            whyYouWantToJoinUs,
            howMuchTimeYouDedicate,
            inWhichFieldYouCanContribute,
            howCanYouHelpUs,
          };

          if (isUrban) {
            payload.cityName = document.getElementById('cityName').value.trim();
            payload.streetOrLocality = document.getElementById('streetOrLocality').value.trim();
            payload.area = document.getElementById('panchayat-select').value.trim(); // urban "areas"
          } else {
            payload.panchayat = document.getElementById('panchayat-select').value.trim();
            payload.villageName = document.getElementById('village-input').value.trim();
          }

          // Send to backend
          const res = await fetch(`${BASE_URL}/volunteers`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload),
          });
          const json = await res.json();

          if (res.ok && json?.success) {
            alert("Volunteer added successfully!");

            // Reset form + UI
            document.getElementById('joinForm').reset();
            imagePreview.classList.add('hidden');
            imagePreview.src = '#';
            uploadStatus.textContent = '';
            uploadedImageUrl = '';

            // Reset dropdowns
            resetBlockDropdown();
            resetPanchayatDropdown();

            // Reset zone visuals
            document.querySelectorAll('.zone-button').forEach(btn => {
              btn.className = 'zone-button bg-gray-200 text-gray-700 px-4 sm:px-6 py-2 sm:py-3 rounded-full text-sm sm:text-base font-medium border-2 border-transparent hover:border-yellow-300 transition-all duration-300';
            });
            document.getElementById('zone-description').classList.add('hidden');

            goToStep1();
          } else {
            alert(`Error: ${json?.message || 'Unknown error'}`);
          }
        } catch (err) {
          console.error("Submission error:", err);
          alert(`An error occurred: ${err.message}`);
        } finally {
          submitBtn.disabled = false;
          submitBtn.textContent = 'Submit';
        }
      });

      // Back buttons
      document.getElementById('backStep1Btn')?.addEventListener('click', () => goToStep1()); // from Step 2 -> Step 1
      document.getElementById('backStep2Btn')?.addEventListener('click', () => goToStep2()); // from Step 3 -> Step 2

      // Initialize zone UI if a radio is pre-checked
      const initialZone = document.querySelector('input[name="zone"]:checked');
      if (initialZone) updateFormForZone(initialZone.value);
    });
  </script>

  <script src="./app.js"></script>
  <script src="./winglist.js"></script>
</body>

</html>